
@{
    ViewData["Title"] = "asyncmyOrderDetail";
}

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calendar</title>
    <link href="calendar.css" rel="stylesheet" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<div id="orderDetailContent">
    <!-- Carousel wrapper -->
    <div id="carouselBasicExample" class="carousel slide carousel-fade" data-mdb-ride="carousel">
        <!-- Indicators -->
        <div class="carousel-indicators">
            <button type="button"
                    data-mdb-target="#carouselBasicExample"
                    data-mdb-slide-to="0"
                    class="active"
                    aria-current="true"
                    aria-label="Slide 1"></button>
            <button type="button"
                    data-mdb-target="#carouselBasicExample"
                    data-mdb-slide-to="1"
                    aria-label="Slide 2"></button>
            <button type="button"
                    data-mdb-target="#carouselBasicExample"
                    data-mdb-slide-to="2"
                    aria-label="Slide 3"></button>
        </div>

        <!-- Inner -->
        <div class="carousel-inner">
            <!-- Single item -->
            <div id="img1"  class="carousel-item active">
               
@*                 <div class="carousel-caption d-none d-md-block">
                    <h5>First slide label</h5>
                    <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                </div> *@
            </div>

            <!-- Single item -->
            <div class="carousel-item">
                <img src="https://mdbcdn.b-cdn.net/img/Photos/Slides/img%20(22).webp" class="d-block w-100" alt="Canyon at Nigh" />
                <div class="carousel-caption d-none d-md-block">
                    <h5>Second slide label</h5>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
            </div>

            <!-- Single item -->
            <div class="carousel-item">
                <img src="https://mdbcdn.b-cdn.net/img/Photos/Slides/img%20(23).webp" class="d-block w-100" alt="Cliff Above a Stormy Sea" />
                <div class="carousel-caption d-none d-md-block">
                    <h5>Third slide label</h5>
                    <p>Praesent commodo cursus magna, vel scelerisque nisl consectetur.</p>
                </div>
            </div>
        </div>
        <!-- Inner -->
        <!-- Controls -->
        <button class="carousel-control-prev" type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <!-- Carousel wrapper -->
    <br />
    <div class="container">
        <h1 id="title" class="h-100 d-flex justify-content-center align-items-center"></h1>
        <!-- Stepper -->
        <div class="wrapper option-1 option-1-1">
            <ol class="c-stepper">
                <li class="c-stepper__item">
                    <h3 class="c-stepper__title">報名付款</h3>
                    <p class="c-stepper__desc">報名狀態</p>
                </li>
                <li class="c-stepper__item">
                    <h3 class="c-stepper__title">報到參與體驗</h3>
                    <p class="c-stepper__desc">產生QRcode</p>
                </li>
                <li class="c-stepper__item">
                    <h3 class="c-stepper__title">回饋</h3>
                    <p class="c-stepper__desc">留言</p>
                </li>
            </ol>
        </div>
        <!-- Stepper -->
    <br>
    <nav>
        <ul class="menu d-flex justify-content-between">
            <li><a href="#about">課程介紹</a></li>
            <li><a href="#order">訂單資訊</a></li>
            <li><a href="#cancel">取消更改政策</a></li>
            <li><a href="#location">位置</a></li>
        </ul>
    </nav>
    </div>
    <div class="container space1">
        <div class="d-flex align-items-start  bg-light  row mb-3">
            <!--左側-->
            <div class="col-8">
                    <h2 id="about">簡介</h2>
                <div id="div1"></div>
                <br>
                <div class="flip"><span class="1"><h2 class="fa-solid fa-caret-down" id="cancel">取消與更改</h2></span></div>
                <div class="panel">
                    <br>
                    <h5 style="font-size:20px">取消辦法</h5>
                    <ul>
                        

                        <li>出發日前 7 日前（不含出發日）通知取消，可全額退費。</li>
                        <li>出發日前 6 日至前 4 日內（不含出發日）通知取消，收取手續費 50％。</li>
                        <li>出發日前 3 日（不含出發日）至當日內不接受取消，並不予退回款項。</li>
                        <li>於活動中如因非可究責主辦單位之因素中止參與活動，將不予退回款項。</li>
                        <li>如因天災等不可抗力因素，FUNShare 將主動聯繫延期或退款。</li>
                        <li>上述時間以消費者進線客服人員表明要取消的時間點為準。</li>
                        <li>取消收取手續費依四捨五入計算至元。</li>
                    </ul>
                    <h5 style="font-size:20px">更改辦法</h5>
                    <ul>
                        <li>出發日前 4 日前（不含出發日）可更改日期一次。</li>
                        <li>改期僅限於同一主辦單位、同價格之相同活動方案，且僅限更改至月曆表上已開放之可預訂時段。經改期後之活動恕不接受取消退費。</li>
                        <li>出發日前 3 日至當日內不接受更改日期。</li>
                        <li>如欲更改人數，須至少於出發日前 4 天詢問 FUNShare。</li>
                        <li>上述時間以消費者向客服提出申請訂單更改之時間點為準。</li>
                    </ul>
                    <br>
                </div>
                <div>
                    <br>
                    <h2 id="location">位置</h2>
                    <div class="col-md-12">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3618.403767109375!2d121.30845667611052!3d24.918311442938855!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34681906c6ffce35%3A0xe6a6f2910cdf511a!2z6aaZ6I2J6YeO5ZyS!5e0!3m2!1sen!2stw!4v1692098739764!5m2!1sen!2stw"  width="600" height="450" style="border:1px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                    <br>
                </div>
                <h2>體驗回饋</h2>
                <div class="review">
                    <label>留下您寶貴的意見:</label>
                    <input type="text" class="form-control justify-content-start align-items-start" style="height: 100px;">
                    <button class="btn btn-floating ">送出</button>
                </div>

            </div>
            <!--左側-->
            <!--右側-->
            <div class="col-md-4">
                <div >
                    <h2>報名狀況</h2>
                    <ul class="far fa-circle-check" id="signpStatus">  </ul>
                </div>
                <div>
                <br>
                <h2>繳費狀況</h2>
                    <ul class="far fa-credit-card" id="paymentStatus"></ul>
                </div>
           @*      todo...要想訂單編號邏輯 *@
                <div>
                    <br>
                    <h2 id="order">訂單</h2>
                    <ul>
                        <p><i class="fas fa-arrow-right-long"></i>  訂單編號: 20235462124</p>
                        <p><i class="far fa-user"></i>  人數: 2人</p>
                    </ul>
                </div>
                <div>
                    <br>
                    <h2>帳單</h2>
                    <ul>
                        <p id="ordertime"></p>
                        <p>訂單金額: TWD 580</p>
                        <p>結帳金額: TWD 580</p>
                        <p>紅利回饋: 580</p>
                    </ul>
                </div>
                <div>
                    <br>
                    <h2>課程體驗時間</h2>
                    <ul id="eventTime"></ul>

                </div>
                <div>
                    <br>
                    <h2>主辦廠商</h2>
                    <ul id="supplier"></ul>
                </div>
            </div>
            <!--右側-->
        </div>
    </div>
</div>
<br />


@section Scripts{
    <script>
        //導入參數orderId
        const urlParams = new URLSearchParams(window.location.search);
        const orderId = urlParams.get('orderId');

        //const title = document.querySelector('title')
        //const div1 = document.querySelector('#div1')

        //fetch 帶入資料

        async function orderDetail(){
            const response = await fetch(`@Url.Content("~/api/getmyOrderDetail?orderId=")${orderId}`)
            const datas = await response.json();
            console.log(datas)
            //時間格式化
            const beginTime = new Date(datas[0].beginTime);
            const endTime = new Date(datas[0].endTime);
            const ordertime = new Date(datas[0].orderTime);
   
                document.querySelector("#title").innerHTML = datas[0].productName
            document.querySelector("#div1").innerHTML = datas[0].features
            document.querySelector("#img1").innerHTML = `<img src="../img/product/${datas[0].imagePath}"class="d-block w-100" alt="First img" />`
            document.querySelector("#signpStatus").innerHTML = `    ${datas[0].orderDetailStatus}`
            document.querySelector("#paymentStatus").innerHTML = `    ${datas[0].orderStatus}`
            document.querySelector("#ordertime").innerHTML = `訂購時間: ${ordertime.getFullYear()} -${(ordertime.getMonth() + 1).toString().padStart(2, '0')} -${ordertime.getDate().toString().padStart(2, '0')} ${ordertime.getHours().toString().padStart(2, '0')}:${ordertime.getMinutes().toString().padStart(2, '0')}`
            document.querySelector("#eventTime").innerHTML = `<P> ${beginTime.getFullYear()} -${(beginTime.getMonth() + 1).toString().padStart(2, '0')} -${beginTime.getDate().toString().padStart(2, '0')} ${beginTime.getHours().toString().padStart(2, '0')}:${beginTime.getMinutes().toString().padStart(2, '0')}</P>
                                                                <p class="justify-content-center">至</p>
                                                              <p>${endTime.getFullYear()} -${(endTime.getMonth() + 1).toString().padStart(2, '0')} -${endTime.getDate().toString().padStart(2, '0')} ${endTime.getHours().toString().padStart(2, '0')}:${endTime.getMinutes().toString().padStart(2, '0')}</p>`
            document.querySelector("#supplier").innerHTML = `    ${datas[0].supplierName}`
        }

        orderDetail();
    </script>
    <script>
        //收合script
    $(function(){
    $(".flip").click(function(){
    $(".panel").slideToggle("slow");
    // $(".xs1").toggle();
    // $(".xs2").toggle();
  });});
    </script>
}
@section Styles{
    <style>
/*         container設計 */
        .space1 {
            border:groove;
            border-color: #F0F0F0;
            border-radius:10px;
            padding:40px;
        }

/*         stepper 設定 */
        :root {
            --circle-size: clamp(1.5rem, 5vw, 3rem);
            --spacing: clamp(0.25rem, 2vw, 0.5rem);
        }

        .c-stepper {
            display: flex;
        }

        .c-stepper__item {
            display: flex;
            flex-direction: column;
            flex: 1;
            text-align: center;
            &:before

        {
            --size: 3rem;
            content: "";
            display: block;
            width: var(--circle-size);
            height: var(--circle-size);
            border-radius: 50%;
            background-color: lightgrey;
            background-color: #D1E9E9;
            opacity: 0.5;
            margin: 0 auto 1rem;
        }

        &:not(:last-child) {
            &:after

        {
            content: "";
            position: relative;
            top: calc(var(--circle-size) / 2);
            width: calc(100% - var(--circle-size) - calc(var(--spacing) * 2));
            left: calc(50% + calc(var(--circle-size) / 2 + var(--spacing)));
            height: 2px;
            background-color: #e0e0e0;
            order: -1;
        }

        }
        }

        .c-stepper__title {
            font-weight: bold;
            font-size: clamp(1rem, 4vw, 1.25rem);
            margin-bottom: 0.5rem;
        }

        .c-stepper__desc {
            color: grey;
            font-size: clamp(0.85rem, 2vw, 1rem);
            padding-left: var(--spacing);
            padding-right: var(--spacing);
        }

        /*** Non-demo CSS ***/

        .wrapper {
            max-width: 1000px;
            margin: 2rem auto 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            padding: 1rem;
        }

        *,
        *:before,
        *:after {
            box-sizing: border-box;
        }
        /*         stepper 設定 */

/*         標題下目錄頁 */
        .menu {
            width: 100%;
            overflow: auto;
            background-color: #F0F0F0;
            border-radius: 5px;
            list-style-type: none;
        }

            .menu li {
                width: 10em;
                line-height: 4em;
                float: left;
            }

                .menu li a {
                    display: block;
                    text-align: center;
                    color: #000000;
                    font-size: 20px;
                }

                    .menu li a:link {
                        text-decoration: none;
                    }

                    .menu li a:hover {
                        background-color: #eaeaea;
                        color: #121212;
                        border-radius: 5px;
                    }
/*                     收合 */
        .flip {
            margin: 0px;
            padding: 5px;
/*             text-align: center; */
 /*            border:dashed;
            border-block-color:black;
            border-width:thin; */
            cursor: pointer;
      
        }

        .panel {
            margin: 0px;
            padding: 5px;
      /*       border: dashed;
            border-block-color: black;
            border-width: thin; */
      /*       text-align: center; */
            display: none;
        }
    </style>

  
}


